---
title: "Template"
format: html
editor: visual
---

## Idea

If the result of a *k-means* clustering run is "real", then the results should be more consistent regardless of initial conditions.  I would expect the withinss to be the same nearly every time if we are finding the same clusters every time, versus a "not correct" $k$ might lead to more variability in cluster structure.
## Metric Calculation

```{r}

get_withinss <- function(dat, k) {
  
   temp <- kmeans(dat, k)
  
    c("withinss" = temp$tot.withinss, "nclust" = k)
}


```

## Experiments

```{r}
library(ggridges)

dat <- penguins %>% 
  select(bill_length_mm:body_mass_g) %>%
  drop_na() %>%
  mutate_all(scale) %>%
  as.matrix()

res <- c()
for (k in 2:5) {
  
  for (reps in 1:100){

    res <- rbind(res, get_withinss(dat, k))
  
  }
}

res %>%
  as_tibble() %>%
  group_by(nclust) %>%
  summarize(var(withinss))
```

```{r}
res |> 
  ggplot() +
  aes(x = withinss, y = factor(nclust)) +
  geom_density_ridges()
```

## Results

Perhaps more variability at $k = 3$? Nothing too compelling through.
